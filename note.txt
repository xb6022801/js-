ç¬¬21ç«  ajaxä¸comet

XHR.open(method, url, isAsync)
open()åªæ˜¯å¯åŠ¨ä¸€ä¸ªè¯·æ±‚ï¼Œå¹¶ä¸ä¼šçœŸæ­£å‘é€ã€‚

XHR.send({ body } / null ) --> çœŸæ­£å‘é€ã€‚
return: responseText, responseXML (if content-type= "text/xml"), status, statusText

readyState // 0 1 2 3 4 --> readystatechange

è®¾ç½®è‡ªå®šä¹‰çš„è¯·æ±‚å¤´éƒ¨ä¿¡æ¯: setRequestHeader(), æ³¨: åœ¨open å’Œ send ä¹‹é—´è°ƒç”¨æ‰è¡Œ

GETè¯·æ±‚: æ¯ä¸ªparameteréƒ½éœ€è¦ç”¨encodeURIComponentè¿›è¡Œç¼–ç 


XMLHttpRequest 2çº§å†…å®¹:
FormData: var form = new FormData() //or form = new FormData(documents.forms[0])
è¶…æ—¶é™å®š: åªæœ‰ie8æ”¯æŒã€‚ xhr.timeout = 1000 xhr.ontimeout = function() {}
overrideMimeType() é‡å†™å“åº”çš„mimeç±»å‹ï¼Œåº”ç”¨ï¼šå¦‚æœè¿”å›xmlè€Œmimeæ˜¯text/plainï¼Œåˆ™responseXMLä¸ºnullï¼Œæ”¹å†™è¿™ä¸ªæ–¹æ³•å¼ºåˆ¶è®¾ç½®xmlï¼Œ
ï¼ˆå¿…é¡»åœ¨sendä¹‹é—´ï¼‰
è¿›åº¦äº‹ä»¶ï¼šloadstart, progress, load, error, loadend
onload(event) || onprogress(event) //event.target = xhr
onprogressäº‹ä»¶å¿…é¡»åœ¨open()æ–¹æ³•å‰è°ƒç”¨ã€‚

è·¨åŸŸ
CORS ï¼ˆcross origin resource sharing, è·¨æºèµ„æºå…±äº«ï¼‰ï¼šè‡ªå®šä¹‰httpå¤´éƒ¨è®©æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´æ²Ÿé€šï¼Œä»è€Œå†³å®šæ˜¯å¦å“åº”è¯·æ±‚ã€‚
client: origin: http://www.baidu.com
server: access-control-allow-origin: http://www.baidu.com
è¯·æ±‚å’Œå“åº”éƒ½ä¸åŒ…æ‹¬cookieä¿¡æ¯ã€‚

corséƒ½æ˜¯å¼‚æ­¥çš„ï¼Œæ²¡æœ‰æœ€åä¸€ä¸ªisAsyncå‚æ•°

IE8å¯¹corsçš„å®ç°ï¼šXDR (XDomainRequest)
å…¶ä»–æµè§ˆå™¨å¯¹corsçš„å®ç°ï¼šç›´æ¥ç”¨xhrå°±è¡Œã€‚ä¸ç”¨æ˜¾å¼è®¾ç½®originç­‰ã€‚ä½†æ˜¯æœ‰ä¸€äº›é™åˆ¶ï¼š1.ä¸èƒ½è®¾ç½®setRequestHeader() 2.ä¸èƒ½è®¾ç½®cookieç­‰ã€‚
ä¸ºäº†æ¶ˆé™¤æ­§ä¹‰ï¼Œå¯¹æœ¬ç«™èµ„æºç”¨ç›¸å¯¹urlï¼Œå¯¹ä¸åŒæºçš„æ‰ç”¨ç»å¯¹urlã€‚

å¸¦å‡­æ®çš„è¯·æ±‚: å¦‚æœå‘é€çš„æ˜¯å¸¦å‡­æ®å¸¦è¯·æ±‚è€Œå“åº”ä¸­æ²¡æœ‰åŒ…å«è¿™ä¸ªå¤´éƒ¨ï¼Œåˆ™status = 0, responseText = empty, invoke onerror() event
client: withCredentials: true (IE10ä»¥åŠæ›´æ—©ç‰ˆæœ¬éƒ½ä¸æ”¯æŒ)
server: Allow-Control-Allow-Credentials: true

å…¶ä»–è·¨åŸŸæŠ€æœ¯ï¼šï¼ˆéƒ½æ˜¯åœ¨corsè¢«å¹¿æ³›è¿ç”¨ä¹‹å‰ï¼‰
å›¾åƒpingï¼šæœ€å¸¸ç”¨äºè·Ÿè¸ªç”¨æˆ·ç‚¹å‡»é¡µé¢æˆ–è€…åŠ¨æ€å¹¿å‘Šæ›å…‰æ¬¡æ•°ã€‚ç¼ºç‚¹ï¼šåªèƒ½å‘é€GETï¼Œä¸èƒ½è®¿é—®å“åº”æ–‡æœ¬ã€‚
JSONP: json with padding ï¼ˆsee server.js + testJsonp.js + index.htmlï¼‰
ç¼ºç‚¹: å¦‚æœå“åº”ä¸­å¤¹æ‚æ¶æ„ä»£ç ï¼Œæ²¡æœ‰åˆ«çš„å¥½çš„åŠæ³•ï¼Œåªèƒ½æ”¾å¼ƒjsonpè°ƒç”¨ã€‚2. ç¡®å®šjsonpå¤±è´¥å¹¶ä¸å®¹æ˜“

cometï¼šå’Œajaxç›¸åï¼Œcometæ˜¯æœåŠ¡å™¨å‘å®¢æˆ·ç«¯æ¨é€ã€‚e.g. é•¿è½®è¯¢ å’Œ æµã€‚
é•¿è½®è¯¢ï¼šå®¢æˆ·ç«¯å‘è¯·æ±‚ï¼ŒæœåŠ¡å™¨ä¿æŒè¿æ¥ï¼Œæœ‰æ•°æ®æ‰å‘é€å“åº”ï¼Œç„¶åå®¢æˆ·ç«¯ç«‹å³å†å‘è¯·æ±‚ã€‚

websocket: ws:// or wss://
ç”±äºä¼ é€’çš„æ•°æ®åŒ…å¾ˆå°ï¼Œå¾ˆé€‚åˆç§»åŠ¨åº”ç”¨å¼€å‘ã€‚
åªèƒ½å‘é€çº¯æ–‡æœ¬æ•°æ®ï¼Œæ‰€ä»¥éœ€è¦JSON.stringify

SSEå’Œå¾®åšsocketçš„å–èˆ:
- æ˜¯å¦æœ‰è‡ªç”±åº¦å»ºç«‹å’Œç»´æŠ¤æœåŠ¡å™¨ï¼Œå› ä¸ºwebsocketéœ€è¦å‡çº§æœåŠ¡å™¨åè®®
- æ˜¯å¦éœ€è¦åŒå‘é€šä¿¡ï¼Œå¦‚æœåªæ˜¯éœ€è¦ä»æœåŠ¡å™¨è¯»å–æ•°æ®ï¼Œç”¨SSEå°±å¯ä»¥ã€‚

/*************************** end of chapter 21 *****************/
ç¬¬7ç« : å‡½æ•°è¡¨è¾¾å¼ (é—­åŒ…ï¼Œç§æœ‰å˜é‡ç­‰)
å‡½æ•°å£°æ˜ or å‡½æ•°è¡¨è¾¾å¼
å‡½æ•°æœ‰nameå±æ€§: alert(fn.name)

å‡½æ•°å£°æ˜ç‰¹æ€§: å‡½æ•°å£°æ˜æå‡
å‡½æ•°è¡¨è¾¾å¼æ²¡æœ‰å£°æ˜æå‡

é€’å½’å‡½æ•°ä¸­å¯ä»¥ç”¨arguments.calleeæ¥ä»£æ›¿å‡½æ•°åï¼Œç¡®ä¿ä¸ä¼šå‡ºé—®é¢˜ã€‚å¦‚æœä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå¯ä»¥ç”¨å‘½åå‡½æ•°è¡¨è¾¾å¼æ¥è¾¾æˆç›¸åŒæˆæœã€‚
(factorial.js)

é—­åŒ…:
å‡½æ•°åŒ…æ‹¬å…¨å±€ä½œç”¨åŸŸ+å‡½æ•°çš„æ‰§è¡Œä½œç”¨åŸŸã€‚æ‰§è¡Œå®Œå‡½æ•°ä½œç”¨åŸŸè¢«é”€æ¯ã€‚
é—­åŒ…: å‡½æ•°é‡Œçš„åŒ¿åå‡½æ•°ï¼Œé™¤äº†è¿™2è€…ä¹‹å¤–ï¼Œè¿˜åŒ…æ‹¬çˆ¶çº§å‡½æ•°çš„ä½œç”¨åŸŸï¼Œè€Œçˆ¶çº§å‡½æ•°ç”±äºè¿˜è¢«å¼•ç”¨ï¼Œæ‰€ä»¥ä¸ä¼šè¢«é”€æ¯ã€‚
éœ€è¦æ‰‹åŠ¨è®©åŒ¿åå‡½æ•°= nullï¼Œå°±å¯ä»¥è®©è¯¥å‡½æ•°å’Œçˆ¶çº§å‡½æ•°è¢«åƒåœ¾å›æ”¶ã€‚
é—­åŒ…å› æ­¤ä¼šå ç”¨æ›´å¤šçš„å†…å­˜ã€‚
é—­åŒ…åªèƒ½å–å¾—åŒ…å«å‡½æ•°ä¸­ä»»ä½•å˜é‡çš„æœ€åä¸€ä¸ªå€¼ã€‚(é—­åŒ….js)

thiså¯¹è±¡: é€šå¸¸æƒ…å†µä¸‹ï¼Œå…¨å±€æƒ…å†µä¸‹æŒ‡å‘windowsã€‚åœ¨å‡½æ•°å†…æŒ‡å‘æ‰§è¡Œå‡½æ•°çš„å¯¹è±¡ã€‚
åŒ¿åå‡½æ•°çš„æ‰§è¡Œç¯å¢ƒæœ‰å…¨å±€æ€§ï¼ŒthisæŒ‡å‘windows (ç»å…¸é—®é¢˜ã€‚var that = this)

å†…å­˜æ³„æ¼ï¼š
- IEï¼šå¦‚æœé—­åŒ…çš„ä½œç”¨é“¾ä¸­åŒ…å«htmlå…ƒç´ ï¼Œåˆ™è¯¥å…ƒç´ æ— æ³•è¢«é”€æ¯ã€‚
important: é—­åŒ…ä¼šé¥®ç”¨åŒ…å«å‡½æ•°çš„æ•´ä¸ªæ´»åŠ¨å¯¹è±¡

æ¨¡ä»¿å—çº§ä½œç”¨åŸŸ: å¥½å¤„ï¼šä¸ä¼šæ±¡æŸ“å…¨å±€ä½œç”¨åŸŸ/çˆ¶çº§ä½œç”¨åŸŸï¼Œå‡å°‘å†…å­˜å¼€é”€ ï¼ˆç§æœ‰ä½œç”¨åŸŸ.jsï¼‰

ç§æœ‰å˜é‡: argumentsï¼Œ local variables, å‡½æ•°ä¸­å®šä¹‰çš„å‡½æ•°
å¯ä»¥åˆ›é€ å¯ä»¥è®¿é—®ç§æœ‰å˜é‡çš„æ–¹æ³•. ï¼ˆç§æœ‰å˜é‡.jsï¼‰ è¯¥æ¨¡å¼çš„ç¼ºç‚¹æ˜¯å¿…é¡»ä½¿ç”¨æ„é€ å‡½æ•° ï¼ˆnew fn()ï¼‰,è¿™å°†é’ˆå¯¹æ¯ä¸ªå®ä¾‹æ„é€ 
ä¸€ç»„æ–°æ–¹æ³•ã€‚not coolã€‚ è§£å†³åŠæ³•ï¼šé™æ€ç§æœ‰å˜é‡ã€‚ (é™æ€ç§æœ‰å˜é‡.js)

æ¨¡å—æ¨¡å¼: ä¸ºå•ä¾‹åˆ›é€ ç§æœ‰å˜é‡å’Œæ–¹æ³• (å•ä¾‹æ¨¡å¼.js)
å¢åŠ æ¨¡å—æ¨¡å¼

/************************END OF CHAPTER 7 *********************************/

ç¬¬å››ç« ï¼š å˜é‡ï¼Œä½œç”¨åŸŸå’Œå†…å­˜é—®é¢˜

åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹ã€‚
å¤åˆ¶åŸºæœ¬å˜é‡ï¼Œå®é™…ä¸Šæ˜¯å¤åˆ¶å€¼ï¼Œä¸¤è€…æ˜¯ç‹¬ç«‹çš„

å‚æ•°ä¼ é€’ï¼šåŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹éƒ½æ˜¯å€¼ä¼ é€’ã€‚ä½†æ˜¯å¼•ç”¨ç±»å‹/å¯¹è±¡åœ¨å‡½æ•°ä¸­å±æ€§è¢«ä¿®æ”¹ä¾ç„¶ä¼šä½“ç°å‡ºæ¥ï¼ˆå˜é‡ä¼ é€’.jsï¼‰

typeof null --> object
typeof undefined --> undefined

instanceof æ£€æµ‹æ˜¯å¦ä¸ºobjectï¼Œè¿”å›trueã€‚å¯¹åŸºæœ¬ç±»å‹è¿”å›false

æ‰§è¡Œç¯å¢ƒï¼šæ¯ä¸ªæ‰§è¡Œç¯å¢ƒéƒ½æœ‰ä¸€ä¸ªä¸ä¹‹ç›¸å…³è”ç‚¹å˜é‡å¯¹è±¡(variable object)
ä½œç”¨åŸŸé“¾ï¼š scope chain
æ‰§è¡Œç¯å¢ƒåªæœ‰ å…¨å±€ å’Œ å±€éƒ¨ç¯å¢ƒ
å»¶é•¿ä½œç”¨åŸŸé“¾æ–¹æ³•: with or try/catch (with.js)

æ²¡æœ‰å—çº§ä½œç”¨åŸŸ ï¼ˆ{}: ä¸¾ä¾‹ï¼š ifè¯­å¥ï¼Œforå¾ªç¯ä¸­åˆå§‹åŒ–çš„i ï¼ˆ0åˆ°10ï¼‰ï¼Œæ‰§è¡Œå®Œä»¥åè¿˜æ˜¯10ï¼‰
åœ¨å‡½æ•°é‡Œå˜é‡å¦‚æœæ²¡æœ‰ç”¨varå£°æ˜ï¼Œåˆ™è‡ªåŠ¨åŠ å…¥å…¨å±€å˜é‡ã€‚

åƒåœ¾æ¸…ç†ï¼šæ‰¾å‡ºä¸å†ä½¿ç”¨çš„å˜é‡ï¼Œç„¶åé‡Šæ”¾å…¶å†…å­˜ã€‚
å¸¸ç”¨æ–¹æ³•ï¼šæ ‡è®°æ¸…é™¤ or å¼•ç”¨è®¡æ•°

IEçš„æ€§èƒ½é—®é¢˜ï¼šIEçš„åƒåœ¾æ”¶é›†å™¨æ˜¯æ ¹æ®å†…å­˜åˆ†é…é‡è¿è¡Œçš„ã€‚
æ€§èƒ½ä¼˜åŒ–ï¼šå…¨å±€å˜é‡å’Œå…¨å±€å¯¹è±¡çš„å±æ€§ï¼Œä¸€æ—¦ä¸å†æœ‰ç”¨ï¼Œç›´æ¥æ‰‹åŠ¨è®¾ç½®ä¸ºnullï¼Œä»¥ä¾¿åƒåœ¾å›æ”¶ï¼Œ
globalVariable = null

/************************END OF CHAPTER 4 *********************************/

ç¬¬å…­ç« ï¼šé¢å‘å¯¹è±¡çš„ç¨‹åºè®¾è®¡

å¯¹è±¡: æ•°æ®å±æ€§: [[configurable, enumerable, writable, value]]
Object.defineProperty(): ç”¨è¯¥æ–¹æ³•æ—¶ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œåˆ™configurable, enumerable, writableé»˜è®¤éƒ½æ˜¯false

è®¿é—®å™¨å±æ€§ï¼š getters, setters
åªæŒ‡å®šgettersæ„å‘³ç€ä¸èƒ½set valueã€‚

å®šä¸€ä¸ªattributæ—¶æ•°æ®å±æ€§æˆ–è€…è®¿é—®å™¨å±æ€§åªèƒ½ä»»é€‰å…¶ä¸€ã€‚
Object.getOwnPropertyDescriptor(Obj, attribut) 

è®¾è®¡æ¨¡å¼ï¼š
å·¥å‚æ¨¡å¼ï¼š æ— éœ€èµ˜è¨€
æ„é€ å‡½æ•°æ¨¡å¼: æ— éœ€èµ˜è¨€, (å¤§å†™å¼€å¤´)ï¼Œ è¦åˆ›å»ºæ–°å®ä¾‹ï¼Œå¿…é¡»è¦newæ“ä½œç¬¦ã€‚newçš„è¿‡ç¨‹æ‰§è¡Œäº†ä»¥ä¸‹4ä¸ªæ­¥éª¤ï¼š
- æ–°å»ºå¯¹è±¡
- å°†å‡½æ•°ä½œç”¨åŸŸèµ‹ç»™å¯¹è±¡
- æ‰§è¡Œå‡½æ•°ä¸­çš„æ–¹æ³•
- è¿”å›å¯¹è±¡

æ„é€ å‡½æ•°æ¨¡å¼æ¯”å·¥å‚æ¨¡å¼å¥½ï¼Œçœ‹ï¼ˆæ„é€ å‡½æ•°.jsï¼‰
æ„é€ å‡½æ•°å’Œæ™®é€šå‡½æ•°æ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼ŒåŒºåˆ«åªæ˜¯new ä¸ new
æ„é€ å‡½æ•°ç¼ºç‚¹ï¼š æ¯æ¬¡æ–°å»ºå®ä¾‹éƒ½è¦æ–°å»ºå†…éƒ¨å‡½æ•°

åŸå‹æ¨¡å¼ï¼š 
æ¯æ¬¡æ–°å»ºå®ä¾‹ï¼Œå®ä¾‹å†…éƒ¨å°†åŒ…å«ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ï¼Œåˆå§‹æƒ…å†µä¸‹prototypeåªåŒ…å«constructor
console.log(Person.prototype.isPrototypeOf(obj1)) //true
console.log(Object.getPrototypeOf(obj1))
å®ä¾‹ä¸èƒ½overwriteåŸå‹ä¸Šçš„å€¼ã€‚ä½†æ˜¯å¯ä»¥åœ¨è‡ªå·±çš„å®ä¾‹ä¸Šè¦†ç›–è¿™ä¸ªè¯ã€‚

inæ“ä½œç¬¦ï¼š æ‰€æœ‰enumerable = trueçš„keyéƒ½ä¼šæ˜¾ç¤º, 
ä¸ç®¡æ˜¯å¦åœ¨åŸå‹æˆ–è€…å®ä¾‹ä¸Šï¼Œéƒ½æ˜¯trueï¼š console.log('name' in person1),
for..in: å¯¹è±¡ä¸Šæ‰€æœ‰enumrableçš„å±æ€§ï¼Œæ— è®ºå®ä¾‹ä¸Šæˆ–è€…åŸå‹ä¸Šã€‚
Object.keys(): å®ä¾‹ä¸Šæ‰€æœ‰enumerableå±æ€§
Object.getOwnPropertyNames(obj): å®ä¾‹ä¸Šæ— è®ºenumerableä¸å¦çš„attributï¼Œ

...
ç»„åˆå®ç”¨åŸå‹æ¨¡å¼å’Œæ„é€ å‡½æ•°æ¨¡å¼ : æ„é€ å‡½æ•°å®šä¹‰å®ä¾‹å±æ€§ï¼ŒåŸå‹æ¨¡å¼å®šä¹‰å…±äº«å±æ€§å’Œæ–¹æ³•
åŠ¨æ€åŸå‹æ¨¡å¼ (åŠ¨æ€åŸå‹æ¨¡å¼.js)
å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼ (å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼.js) : å’Œå·¥å‚æ¨¡å¼å¾ˆåƒã€‚ ä¸èƒ½ç”¨instanceof æ¥ç¡®å®šå¯¹è±¡ç±»å‹ã€‚ä¸æ˜¯ç‰¹åˆ«æ¨èã€‚åº”ç”¨åœºæ™¯: å®ç°æ‹¥æœ‰ç‰¹æ®Šæ–¹æ³•çš„Array.
ç¨³å¦¥æ„é€ å‡½æ•°æ¨¡å¼:ç¦æ­¢ä½¿ç”¨thisï¼Œåªèƒ½é€šè¿‡ç»™å®šæš´éœ²æ–¹æ³•æ¥è®¿é—®å’Œä¿®æ”¹æ•°æ®ã€‚æä¾›äº†ä¸€ç§å®‰å…¨æ€§ã€‚

ç»§æ‰¿
å…³é”®: å­ç±»é€šè¿‡ SubType.prototype = new SuperType() æ¥ç»§æ‰¿ã€‚ä¸”ä¸èƒ½å†™åœ¨æ„é€ å‡½æ•°å†…éƒ¨ã€‚(å…¸å‹ç»§æ‰¿.js), å®šä¹‰æ–¹æ³•ä¸€å®šè¦æ”¾åœ¨æ›¿æ¢åŸå‹ä¹‹å
é—®é¢˜: ç»§æ‰¿ä»¥åï¼Œçˆ¶ç±»å®ä¾‹çš„å±æ€§å˜æˆäº†å­ç±»åŸå‹å¯¹è±¡çš„å±æ€§ï¼Œè¢«æ‰€æœ‰å­ç±»å®ä¾‹å…±äº«ã€‚ --> surtout pas!!; æ‰€ä»¥å®é™…ä¸­å¾ˆå°‘ç›´æ¥ç”¨åŸå‹ç»§æ‰¿ã€‚

æ–¹æ¡ˆä¸€: å€Ÿç”¨æ„é€ å‡½æ•°æ¨¡å¼ã€‚é—®é¢˜: å¹¶ä¸èƒ½ç»§æ‰¿çˆ¶ç±»å‹åŸå‹å¯¹è±¡çš„æ–¹æ³•ã€‚å¯¼è‡´å‡½æ•°å¤ç”¨ä¸å¯è¡Œã€‚ (ç»§æ‰¿_å€Ÿç”¨æ„é€ å‡½æ•°.js)
æ–¹æ¡ˆäºŒ: ç»„åˆç»§æ‰¿: åŸå‹ç»§æ‰¿ + å€Ÿç”¨æ„é€ å‡½æ•°æ¨¡å¼ (ç»„åˆç»§æ‰¿.js) --> åŸå‹ç»§æ‰¿çœŸæ­£å¤§é‡ä½¿ç”¨çš„å…¸å‹æ–¹æ³•ã€‚

åŸå‹å¼ç»§æ‰¿: (åŸå‹å¼ç»§æ‰¿.js)

Object.create(prototype, attributs): ä¾ç„¶ä¼šå…±äº«prototypeçš„å®ä¾‹å±æ€§ã€‚

å¯„ç”Ÿå¼ç»§æ‰¿
ç»„åˆå¯„ç”Ÿå¼ç»§æ‰¿ (ç»„åˆå¯„ç”Ÿå¼ç»§æ‰¿.js) : å¼•ç”¨ç±»å‹æœ€ç†æƒ³çš„ç»§æ‰¿æ–¹å¼ã€‚

/************************END OF CHAPTER 6 *********************************/

ç¬¬8ç« ï¼š BOM
ESCMScriptæ˜¯jsçš„æ ¸å¿ƒã€‚webä¸­çš„æ ¸å¿ƒï¼š BOM
bomçš„æ ¸å¿ƒï¼šwindows ï¼šæµè§ˆå™¨å®ä¾‹ + globalå¯¹è±¡ã€‚

å®šä¹‰åœ¨windowsä¸Šçš„å˜é‡å¯ä»¥deleteï¼š delete windows.value
ç”¨varå®šä¹‰çš„å…¨å±€å˜é‡configurable = false, ä¸å¯ä»¥delete
topå¯¹è±¡æŒ‡å‘æœ€é«˜å±‚æ¡†æ¶ top.frames[0]
parentæŒ‡å‘å½“å‰æ¡†æ¶çš„ä¸Šå±‚æ¡†æ¶

çª—å£ä½ç½®
ä¿®æ”¹çª—å£ä½ç½®: window.moveTo(2 arguments), moveBy(): å¾€å¾€è¢«æµè§ˆå™¨ç¦ç”¨ï¼Œä¸”åªå¯¹æœ€å¤–å±‚windowæœ‰æ•ˆã€‚
windows.screenLeft, screenTop (ä¿®æ”¹çª—å£.js)

çª—å£å¤§å°ï¼šwindow.innerWidth (é¡µé¢çª—å£å¤§å°)/ outerWidth ï¼ˆæµè§ˆå™¨å¤§å°ï¼‰ (chromeé‡Œç›¸åŒ)
viewportï¼ˆè§†å£å¤§å°ï¼‰ï¼šæ ‡å‡†æ¨¡å¼ä¸‹ document.documentElement.clientWidth / document.body.clientWidth
window.open(,,,)

(see çª—å£ä½ç½®.js)

æ‹¦æˆªçª—å£ã€‚windowx = window.open(,,,) 
if (windowx == null) {
  console.log('window is blocked!')
}

locationæ—¢æ˜¯windowså¯¹è±¡ä¹Ÿæ˜¯documentå¯¹è±¡ã€‚
location.assign('url') --> window.location = '' / location.href = ''
æˆ–è€…é€šè¿‡ä¿®æ”¹locationç‚¹å±æ€§æ¥æ›´æ”¹urlã€‚æ¯æ¬¡æ›´æ”¹éƒ½ä¼šé‡æ–°åŠ è½½urlã€‚ï¼ˆä¼šæ·»åŠ æµè§ˆå™¨è®°å½•ï¼Œå¦‚æœä¸éœ€è¦ï¼Œå¯ä»¥ç”¨replaceä»£æ›¿assignï¼‰

location.reload() //ä¼˜å…ˆä»ç¼“å­˜ä¸­åŠ è½½
location.reload(true) //å¼ºåˆ¶ä»æœåŠ¡å™¨åŠ è½½

navigatorï¼š è¯†åˆ«æµè§ˆå™¨ç‚¹äº‹å®æ ‡å‡†
screenå¯¹è±¡: ç”¨å¤„ä¸å¤§ï¼Œæ¯ä¸ªæµè§ˆå™¨å®ç°æ ‡å‡†ä¹Ÿä¸å°½ç›¸åŒã€‚screen.resizeTo(...) é»˜è®¤ä¸€èˆ¬ä¹Ÿè¢«ç¦æ­¢ã€‚

history: window.history, æ¯ä¸ªçª—å£ï¼Œæ¯ä¸ªæ ‡ç­¾é¡µçš„historyéƒ½ä¸åŒã€‚
history.go(-1 | 1 | 2)
history.go('pornhub.com') //è·³è½¬åˆ°æœ€è¿‘æµè§ˆè¿‡çš„åŒ…å«è¯¥å­—ç¬¦ä¸²çš„history
history.back() / forward()

/************************END OF CHAPTER 8 *********************************/
ç¬¬10ç«  DOM
node: node.type å¸¸ç”¨ node.type = NODE.ELEMENT_NODE (1) / NODE.TEXT_NODE (3)
nodeName + nodeValue

æ¯ä¸ªnodeéƒ½æœ‰: node.childNodes, å…¶ä¸­ä¿å­˜ç€ä¸€ä¸ªNodeListå¯¹è±¡ã€‚
node.parentNode
node.nextSibling / node.previousSibling
node.firstChild = node.childNodes[0]
åŒç† node.lastChild = node.childNodes[node.childNodes.length - 1]
node.hasChildNodes() --> check if child nodes exist (1 or more)

ä»¥ä¸Šå±æ€§ï¼Œåªè¯»

node.appendChild()
node.insertBefore(newNode, {}) // if args[1] = null, æˆä¸ºæœ€åä¸€ä¸ªèŠ‚ç‚¹ã€‚
node.replaceNode(newNode, oldNode) // e.g. node.replaceNode(newNode, node.lastChild) : æ›¿æ¢æœ€åä¸€ä¸ªèŠ‚ç‚¹ã€‚
node.removeNode(nodeToReplace) // è¢«ç§»é™¤çš„nodeè¿˜å­˜åœ¨ï¼Œåªæ˜¯æ‰€æœ‰å…³ç³»æŒ‡é’ˆéƒ½è¢«ç§»é™¤ï¼Œåœ¨æ–‡æ¡£ä¸­å·²ç»æ²¡æœ‰äº†è‡ªå·±çš„ä½ç½®ã€‚

node.cloneNode(true | nothing) // trueè¡¨ç¤ºä¹Ÿå¤åˆ¶å­èŠ‚ç‚¹ ï¼ˆä¸å¤åˆ¶jsäº‹ä»¶ç­‰å±æ€§ï¼Œåªå¤åˆ¶nodeå±æ€§ï¼‰å¤åˆ¶å‰å»ºè®®ç§»é™¤äº‹ä»¶ç­‰ ï¼ˆå› ä¸ºIEæœ‰bugï¼‰

Documentç±»å‹ (å­å…ƒç´ ä¸­Elementæœ€å¤šä¸€ä¸ª: html)
document (= window.document)
document.documentElement --> <html>æ ‡ç­¾
document.documentElement  == document.childNodes[0] == document.firstChild
document.body (æ³¨æ„ã€‚bodyå¹¶ä¸æ˜¯documentçš„childNode)

document.title
document.domainï¼ˆå¯ä¿®æ”¹ï¼‰/.URL (åªè¯»)/.referrer (åªè¯»)
document.domainä¸èƒ½è®¾ç½®æœªè·¨è¶Šï¼Œä½†å¯ä»¥è®¾ç½®ä¸ºå­åŸŸã€‚å¦‚æœåŒ…å«å­æ¡†æ¶ï¼Œåˆ™å¯ä»¥å°†ä¸åŒæ¡†æ¶çš„domainè®¾ç½®ä¸ºç›¸åŒçš„domainæ¥å®ç°ä¸¤è€…
çš„jsäº’é€šã€‚

document.getElementById
document.getElementsByName
document.getElementsByTagName: return HTMLCollection
è¯­æ³•ç³– document.anchors/.forms/.images/.links

æ–‡æ¡£å†™å…¥ï¼š document.write()/writelin()/open()/close()

å„ç§nodeç±»å‹ï¼š
å…ƒç´ èŠ‚ç‚¹ï¼šElement 
element.tagName; (æ€»æ˜¯è¾“å‡ºå¤§å†™ã€‚)

HTMLElement: Elementå­ç±»ã€‚ id, title, dir, className, etc. æ‰€æœ‰å…¬è®¤çš„å±æ€§éƒ½å¯ä»¥è¿™ä¹ˆè·å–ï¼Œä¸éœ€è¦ç”¨getAttribute()
è‡ªå®šä¹‰å±æ€§æœ€å¥½åŠ ä¸Š data-

element.getAttribute()/set*/remove*
å˜ç§ï¼š
pNode.attributes.getNamedItem('id').nodeName/nodeValue --> ä¸€èˆ¬æ›´å¤šçš„ç”¨ä¸Šé¢ã€‚ä½†æ˜¯å¯ä»¥éå†ï¼š pNode.attributes.length 
node.attributes.specified --> éå†ä¸­æœ‰ç”¨ï¼Œä¸ºtrueè¡¨ç¤ºæ˜¯æ˜¾å¼è®¾ç½®ã€‚

document.createElement('div')

å…ƒç´ å­èŠ‚ç‚¹: å¯èƒ½åŒ…æ‹¬ç©ºç™½ç¬¦ä¹‹ç±»çš„ï¼Œéå†æ—¶è®°å¾—åˆ¤æ–­node.nodeType

Textç±»å‹ ï¼ˆnodeType = 3)
node.nodeValue | node.data// æ–‡æœ¬å†…å®¹
node.nodeValue = 'modified' //æœ‰htmlæ ‡ç­¾çš„è¯ä¼šè¢«è½¬ä¹‰çš„è¯´
document.createTextNode(nodeValue)

element.normalize() // ç›¸åä½œç”¨: element.firstChild.splitText(nodeValue)

Commentç±»å‹: nodeType = 8ï¼Œ nodeValue = commentText, nodeName = '#comment', parentNode = Element or document

DocumentTypeç±»å‹ ï¼ˆie, chromeä¸æ”¯æŒï¼‰
DocumentFragment (æ–‡æ¡£ç‰‡æ®µã€‚å¾ˆæœ‰ç”¨ã€‚æ’å…¥æ–‡æ¡£ç‰‡æ®µæ—¶æœ¬èº«å¹¶ä¸ä¼šæ’å…¥ã€‚éå¸¸æ£’ã€‚ç®—æ˜¯ä¸€ä¸ªä¼˜åŒ–ã€‚)

Attrç±»å‹ ï¼ˆä¸æ¨èç›´æ¥æ“ä½œï¼‰

NodeListï¼Œ å’ŒNamedNodeMap, HTMLCollectionä¸€æ ·ï¼Œæ˜¯å®æ—¶æ›´æ–°çš„ï¼Œæ³¨æ„æ— é™å¾ªç¯é—®é¢˜ã€‚
åº”è¯¥å°½é‡å‡å°‘è®¿é—®nodelistçš„æ¬¡æ•°ï¼Œå› ä¸ºéƒ½å°†è¿›è¡ŒåŸºäºæ–‡æ¡£çš„æŸ¥è¯¢ã€‚å¯ä»¥è€ƒè™‘å°†nodelistå–å¾—çš„å€¼ç¼“å­˜èµ·æ¥ã€‚

/************************END OF CHAPTER 10 *********************************/
ç¬¬åä¸€ç«  DOMæ‰©å±•
querySelector: ç¬¦åˆçš„ç¬¬ä¸€ä¸ªå…ƒç´ 
document.querySelector(): åŸºäºæ–‡æ¡£æŸ¥æ‰¾
DocumentFragement/Element.querySelector()ï¼šåŸºäºå…ƒç´ åä»£æŸ¥æ‰¾

querySelectorAll(): runtime screenshot --> RETURN NodeListï¼Œ
matchesSelector(): ä¸åŒæµè§ˆå™¨å®ç°ä¸åŒï¼ˆp288ï¼‰

åªé€‰æ‹©å…ƒç´ èŠ‚ç‚¹
nextElementSibling
firstElementChild
childElementCount

HTML5
getElementsByClassName(): åŸç”Ÿå®ç°ï¼Œæœ‰æ€§èƒ½ä¼˜åŠ¿ã€‚ï¼š return NodeList ï¼ˆå’ŒgetElementsByTagNameç­‰æ–¹æ³•ä¸€æ ·ï¼Œæœ‰æ€§èƒ½é—®é¢˜ï¼‰
å¯ä»¥é€šè¿‡è¿™ä¸ªæ–¹æ³•ä¸ºåŒä¸€ç±»é›†åˆæ·»åŠ äº‹ä»¶ç­‰ã€‚

classList (type: DOMTokenList): add/remove/contains/toggle //supported only by Firefox and chromeï¼‰

HTMLDomentæ‰©å±•
document.activeElement //è·å¾—ç„¦ç‚¹å…ƒç´ 
document.hasFocus() //æ–‡æ¡£æ˜¯å¦è·å¾—äº†ç„¦ç‚¹
document.compatMode
document.head

document.charset
document.defaultCharset

è‡ªå®šä¹‰å±æ€§: data-*, é€šè¿‡node.datasetæ¥è®¿é—®: dataset returns a DOMStringMap (name - value)

innerHTML: å„ç§å¯¹å…¶ä¸­è„šæœ¬å†…å®¹çš„ä¸¥æ ¼é™åˆ¶ï¼Œå»ºè®®äº†è§£ä¸€ä¸‹: p294 - p297
outerHTML: åŒ…æ‹¬è°ƒç”¨å…ƒç´ çš„htmlå†…å®¹
æ€»ä¹‹å¦‚æœä¸å¸¦è„šæœ¬å†…å®¹çš„è¯è¿˜æ˜¯ä¸é”™çš„ï¼Œæ¯”javascriptæ‰§è¡Œæ•ˆç‡é«˜å¾ˆå¤š

scrollIntoView(): æ»šåŠ¨é¡µé¢(æ³¨ï¼š æ²¡æœ‰æ»šåŠ¨æ•ˆæœ)

æ–‡æ¡£æ¨¡å¼: document mode: å†³å®šäº†å¯ä»¥ä½¿ç”¨ä»€ä¹ˆåŠŸèƒ½
å¼ºåˆ¶è®¾ç½®æ–‡æ¡£æ¨¡å¼: X-UA-Compatible or <meta http-equiv='X-UA-Compatible' content='IE=IEVersion'>

element.children (element children only): element.children.length == element.childElementCount;

contains() æ–¹æ³•
innerText // firefox ä¸å…¼å®¹ã€‚ä½†æ˜¯æœ‰ textContent
outerText // writeæ—¶æ›¿æ¢æ•´ä¸ªå…ƒç´ 

æ»šåŠ¨ï¼š é™¤äº†HTML5çº³å…¥æ ‡å‡†çš„scrollIntoView()ä»¥å¤–ï¼Œè¿˜æœ‰å„ä¸ªæµè§ˆå™¨å®ç°çš„è‡ªå·±çš„æ–¹æ³•ã€‚ä½†è¿˜æ˜¯scrollIntoView()æœ€å¸¸ç”¨ã€‚

/************************END OF CHAPTER 11 *********************************/
ç¬¬12ç«  DOM2å’ŒDOM3

å…³äºå‘½åç©ºé—´çš„ä¸€äº›æ”¯æŒ
æ ·å¼ï¼š
ä»»ä½•æ”¯æŒstyleçš„htmlå…ƒç´ éƒ½æœ‰ä¸€ä¸ªstyleå±æ€§ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡è¿™ä¸ªè®¾ç½®styleï¼Œ (type: CSSStyleDeclaration)
node.style.background = blue
node.style.csstext //è¿”å›è®¾ç½®çš„styleå±æ€§ã€‚ä¸è¿”å›classçš„èµ‹å€¼
cssTextæ˜¯ä¸€æ¬¡è®¾ç½®æ‰€æœ‰styleæœ€ç®€ä¾¿çš„æ–¹æ³•ã€‚äº†è§£ä¸€ä¸‹

node.style.length
node.style.item(index) //ä¸¤è€…ç»“åˆï¼Œç”¨æ¥éå†ã€‚

document.defaultView.getComputedStyle(node, null) //è¿”å›è®¡ç®—æ ·å¼ï¼Œ åªè¯»ã€‚ IEä¸æ”¯æŒï¼Œä½†æ˜¯æœ‰node.currentStyleè¿”å›è®¡ç®—æ ·å¼
getComputedStyleä¹Ÿä¼šåŒ…æ‹¬é»˜è®¤å€¼ï¼Œæ‰€ä»¥ä¸ç”¨ä¼å›¾ç”¨éå†æ¥è·å¾—æ˜¾å¼è®¾ç½®çš„æ ·å¼

å…ƒç´ å¤§å°
åç§»é‡
console.log(node.offsetLeft) ï¼š å·¦è¾¹æ¡†åˆ°offsetParentå·¦è¾¹æ¡†çš„è·ç¦»
console.log(node.offsetTop)
console.log(node.offsetWidth) ï¼šå…ƒç´ å®½åº¦ï¼ŒåŒ…æ‹¬å‚ç›´æ–¹å‘æ»šåŠ¨æ¡å®½åº¦ã€‚border, margin
console.log(node.offsetHeight)
å¯ä»¥é å¾ªç¯å¾—åˆ°ç›¸å¯¹é¡µé¢çš„åç§»é‡ã€‚

å®¢æˆ·åŒºï¼š
clientWidth/Height: ä¸åŒ…æ‹¬borderçš„å®½åº¦/é«˜åº¦ ï¼ˆelement height + paddingï¼‰
å¸¸ç”¨caseï¼š ç¡®å®šæµè§ˆå™¨è§†å£å¤§å°ï¼š document.documentElement.clientWidth || document.body.clientWidth (å‡å»äº†bodyçš„borderå’Œmargin)

æ»šåŠ¨å¤§å°
scrollHeight/Width: åœ¨æ²¡æœ‰æ»šåŠ¨æ¡çš„æƒ…å†µä¸‹ï¼Œå…ƒç´ å†…å®¹çš„æ€»é«˜åº¦
scrollLeft/Top

åœ¨æ²¡æœ‰æ»šåŠ¨æ¡çš„å‰æä¸‹ï¼ŒscrollHeightå’ŒclientWidthä¸€ç›´
åœ¨æ ‡å‡†æ¨¡å¼ä¸‹ï¼Œæ–‡æ¡£æ€»é«˜åº¦æ˜¯document.documentElement.scrollHeight, (IE7ä¹‹å‰æ˜¯document.body.scrollHeight)

éå†ï¼š(IE8-ä¸æ”¯æŒDOMéå†)
document.createNodeIterator(rootNode, whatToShow, filter, entityReferenceExpansion: boolean) (DOM2.js)
previousNode(), nextNode()

TreeWalkeræ˜¯nodeiteratoræ›´é«˜çº§çš„ç‰ˆæœ¬ã€‚(ä¸ä¸€æ ·çš„èˆ¹æ–°ç‰ˆæœ¬)ï¼Œç”¨äºfirstChild()/lastChild()/nextSibling/previousSibling/currentNode
å‡ ä¸ªé¢å¤–çš„æ–¹æ³•ï¼Œä»è€Œéšå¿ƒæ‰€æ¬²çš„è®©éå†å‘ä¸åŒæ–¹å‘ç§»åŠ¨ã€‚

èŒƒå›´ ï¼ˆRangeï¼‰

/************************END OF CHAPTER 12 *********************************/
ç¬¬13ç«  äº‹ä»¶
äº‹ä»¶å†’æ³¡ + äº‹ä»¶æ•è·
è¡Œå†…jsä»£ç ä¸èƒ½ä½¿ç”¨æœªè½¬ä¹‰htmlè¯­æ³•ï¼š & â€œâ€ > <ç­‰ï¼š onclick="alert('clicked')"
onclick="alert(this.value)" // thisç­‰äºäº‹ä»¶çš„ç›®æ ‡å…ƒç´ 
onclick="alert(event.type)"
å¦‚æ­¤è¡Œå†…jsä»£ç ï¼Œå¯ä»¥ç›´æ¥è®¿é—®å…¨å±€ä½œç”¨åŸŸå˜é‡ï¼Œå¦‚ documentã€‚ä»¥åŠå¦‚æœå½“å‰å…ƒç´ æ˜¯è¡¨å•å…ƒç´ ï¼Œåˆ™å¯ä»¥è®¿é—®è¡¨å•çˆ¶å…ƒç´ ï¼ˆformï¼‰
e.g. alert(username.value)

DOM0çº§äº‹ä»¶å¤„ç†ï¼š node.onclick = function() {}ï¼Œ ç§»é™¤ï¼š node.onclick = null
DOM2çº§äº‹ä»¶å¤„ç†ï¼š addEventListener: å¯ä»¥æ·»åŠ å¤šä¸ªã€‚ ç§»é™¤åªèƒ½é  removeEventListener, å‚æ•°å¿…é¡»ç›¸åŒï¼Œè¿™æ„å‘³ç€addEventListener
æ·»åŠ çš„åŒ¿åå‡½æ•°ä¸èƒ½åˆ é™¤

IEæ·»åŠ äº‹ä»¶ï¼š node.attachEvent / node.detachEvent: this = window
event.stopPropagation // é˜»æ­¢æ•è·æˆ–è€…å†’æ³¡
event.currentTarget / target (äº‹ä»¶çš„ç›®æ ‡å…ƒç´ ) / this: this = currentTarget (always. æ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ )
event.eventPhase : äº‹ä»¶é˜¶æ®µ 1 æ•è· 2 ç¬¦åˆ 3 å†’æ³¡

IEä¸­çš„eventå¯¹è±¡
event.srcElement: äº‹ä»¶çš„ç›®æ ‡å…ƒç´ 
event.returnValue: = event.preventDefault. è®¾ç½®ä¸ºfalseæ¥é˜»æ­¢é»˜è®¤è¡Œä¸º
event.cancelBubble: = event.stopPropagation

äº‹ä»¶ï¼š UI, load/unload, error (on window if js error, on img if failing to load image, etc), abort, etc

load, addEventListener or <body onload='event()'>, <img onload=''>

unload: ä½¿ç”¨caseæœ€å¤šçš„æ˜¯æ¸…é™¤å¼•ç”¨ï¼Œé¿å…å†…å­˜æ³„æ¼
resize/unload's event.target = document

ç„¦ç‚¹äº‹ä»¶ï¼š focus ä¸å†’æ³¡/focusin (å†’æ³¡)/blur/focusout

é¼ æ ‡äº‹ä»¶ï¼šclick/dbclick/mousedown (ç”¨æˆ·æŒ‰ä¸‹ä»»æ„é¼ æ ‡æŒ‰é’®)/mouseup(ç”¨æˆ·é‡Šæ”¾ä»»æ„é¼ æ ‡æŒ‰é’®)/
mouseenter(å…‰æ ‡ç§»åŠ¨åˆ°å…ƒç´ ä¸Šï¼Œä¸å†’æ³¡)/mouseover(å…‰æ ‡ç§»åŠ¨åˆ°å…ƒç´ ä¸Šï¼Œå†’æ³¡ å¦‚æœå­å…ƒç´ è§¦å‘ï¼Œåˆ™çˆ¶å…ƒç´ ä¹Ÿè§¦å‘äº†)
mouseleave(ä¸å†’æ³¡)/mouseout(å†’æ³¡)
mousemove(åœ¨å…ƒç´ å†…éƒ¨ç§»åŠ¨è§¦å‘)/

é¼ æ ‡äº‹ä»¶å…·æœ‰ï¼š clientX, clientY ï¼ˆå®¢æˆ·åŒºä½ç½®ï¼‰| pageX, pageY ï¼ˆç›¸å¯¹é¡µé¢ä½ç½®ï¼‰|| screenX, screenY (ç›¸å¯¹å±å¹•çš„åæ ‡)
pageX = clientX + document.body.scrollLeft || document.documentElement.scrollLeft
e.shiftKey || e.metaKey || e.ctrlKey || e.altKey : true/false

clickäº‹ä»¶ï¼š event.button: 0 1 2(å·¦é”®ä¸­é”®å³é”®)

mousewheeläº‹ä»¶ï¼š event.wheelDelta +120x (å‘å‰æ»š) || -120(å‘åæ»š)

è§¦æ‘¸è®¾å¤‡ï¼šä¸æ”¯æŒé¼ æ ‡ï¼Œ
- soæ²¡æœ‰dbclickäº‹ä»¶
- è½»å‡»å¯å•å‡»å…ƒç´ è§¦å‘mousemoveäº‹ä»¶ï¼Œå¦‚æœå†…å®¹æ²¡å˜åŒ–åˆ™ä¾æ¬¡è§¦å‘mousedown, mouseup, clickäº‹ä»¶ã€‚
- ä¸¤ä¸ªæ‰‹æŒ‡æ”¾å±å¹•ä¸Šä¸”é¡µé¢éšç€æ‰‹æŒ‡ç§»åŠ¨è€Œæ»šåŠ¨ä¼šè§¦å‘mousewheelå’Œscrolläº‹ä»¶ã€‚

æ— éšœç¢é—®é¢˜ï¼š å¯ä»¥é€šè¿‡å›è½¦æ¥è§¦å‘clickäº‹ä»¶
- æ¯”èµ·mousedownå’Œmouseupï¼Œæ›´æ¨èclickå¤„ç†äº‹ä»¶ï¼Œé¿å…ä»£ç æ— æ³•æ‰§è¡Œã€‚
- ä¸è¦ç”¨mouseoveræ¥å‘ç”¨æˆ·æ˜¾ç¤ºæ–°çš„é€‰é¡¹ã€‚
- ä¸è¦ç”¨dbclickå¤„ç†é‡è¦æ“ä½œï¼Œé”®ç›˜æ— æ³•è§¦å‘è¿™ä¸ªäº‹ä»¶ã€‚

é”®ç›˜äº‹ä»¶
keydown ï¼ˆæŒ‰ä»»æ„é”®ä½ï¼‰| keypress (æŒ‰å­—ç¬¦) | keyup
é’ˆå¯¹æ–‡æœ¬è¾“å…¥ï¼Œæœ‰ä¸€ä¸ªtextInputäº‹ä»¶ã€‚
keydown, keyup : event.keyCode, event.charCode: keypress
textInputäº‹ä»¶ï¼š ç±»ä¼¼keypressï¼Œä½†æ˜¯åªæœ‰åœ¨å¯ç¼–è¾‘åŒºåŸŸå†…æŒ‰å­—ç¬¦é”®æ‰ä¼šè§¦å‘ã€‚ï¼ševent.data, event.inputMethod(support by IE only)

å˜åŠ¨äº‹ä»¶ï¼šå½“DOMç»“æ„å‘ç”Ÿæ”¹å˜çš„æ—¶å€™è§¦å‘ï¼š
 DOMNodeRemoved: event.target = node to delete, event.relatedNode = parent node (è§¦å‘äº‹ä»¶æ—¶å°šæœªåˆ é™¤ã€‚å†’æ³¡)ï¼Œ 
 åŒæ—¶è§¦å‘å…¶å­èŠ‚ç‚¹åŠè‡ªèº«çš„DOMNodeRemovedFromDocumentäº‹ä»¶ï¼Œä¸å†’æ³¡ï¼Œæœ€åè§¦å‘parent nodeçš„DOMSubtreeModifiedäº‹ä»¶ã€‚
 DOMNodeInserted:
event.target = node to add, event.relatedNode = parent node (è§¦å‘äº‹ä»¶æ—¶å°šæœªåŠ å…¥ã€‚å†’æ³¡)ï¼Œ 
 åŒæ—¶è§¦å‘å…¶å­èŠ‚ç‚¹åŠè‡ªèº«çš„DOMNodeInsertedIntoDocumentäº‹ä»¶ï¼Œä¸å†’æ³¡ï¼Œæœ€åè§¦å‘parent nodeçš„DOMSubtreeModifiedäº‹ä»¶ã€‚

HTML5äº‹ä»¶
contextMenu: å†’æ³¡ï¼Œæ‰€ä»¥å¯ä»¥æŒ‡å®šä¸€ä¸ªdocumentäº‹ä»¶æ¥å¤„ç†ã€‚å±äºé¼ æ ‡äº‹ä»¶ï¼Œæ‰€ä»¥åŒ…æ‹¬å…‰æ ‡ä¿¡æ¯ï¼Œé€šå¸¸ä½¿ç”¨contextMenuæ¥æ˜¾ç¤ºè‡ªå®šä¹‰èœå•ï¼Œç”¨onclick
äº‹ä»¶æ¥éšè—èœå•

beforeunload: å¸è½½windowå‰è¯¢é—®ç”¨æˆ·æ˜¯å¦å¸è½½ã€‚å¿…é¡»event.returnValue = message, ç„¶å return message

DOMContentLoaded: DOMç»“æ„å®Œæˆåå°±è§¦å‘ã€‚ å¯¹äºä¸æ”¯æŒè¯¥äº‹ä»¶çš„æµè§ˆå™¨ï¼Œå¯ä»¥è®¾ç½®ä¸€ä¸ªsetTimeout(fn, 0)

pageshowå’Œpagehideï¼š (only supported by firefox and opera) äº†è§£ä¸€ä¸‹ã€‚

hashchangeäº‹ä»¶ï¼š event.newURL, event.oldURLï¼Œ æœ€å¥½ç”¨location.hash

è®¾å¤‡äº‹ä»¶ï¼š

safari: orientationchangeäº‹ä»¶ã€‚ window.orientation: 0, 90 (å‘å·¦æ¨ªç€)ï¼Œ-90(å‘å³æ¨ªç€)
äº†è§£ä¸€ä¸‹: MozOrientation, deviceorientation, devicemotion, 

è§¦æ‘¸å’Œæ‰‹åŠ¿äº‹ä»¶ (ä¹¦ä¸­ä¸»è¦é’ˆå¯¹çš„æ˜¯ios)

å†…å­˜å’Œæ€§èƒ½ï¼š
äº‹ä»¶å§”æ‰˜ (äº‹ä»¶.js) æœ€é€‚åˆäº‹ä»¶å§”æ‰˜çš„äº‹ä»¶å³: mousedown, mouseup, keypress, keydown, keyup
ç§»é™¤äº‹ä»¶å¤„ç†ç¨‹åºï¼š 1. åœ¨ç§»é™¤DOMå…ƒç´ ä¹‹å‰ï¼Œè®°å¾—ç§»é™¤ç»‘å®šçš„äº‹ä»¶ï¼Œå¦åˆ™è¿˜ä¿å­˜åœ¨å†…å­˜é‡Œã€‚2. unload é¡µé¢æ—¶ï¼Œä¹Ÿéœ€è¦
ç§»é™¤åŠ è½½é¡µé¢æ—¶ç»‘å®šçš„äº‹ä»¶ã€‚ğŸ˜ª

æ¨¡æ‹Ÿäº‹ä»¶
document.createEvent() then document.dispatchEvent()
äº‹ä»¶ç±»å‹: UIEvents, MouseEvents, MutationEvents, HTMLEvents

æ¨¡æ‹Ÿé¼ æ ‡äº‹ä»¶: document.createEvent('MouseEvents'), then event.initMouseEvent() then node.dispatchEvent()
æ¨¡æ‹Ÿé”®ç›˜äº‹ä»¶: document.createEvent('KeyboardEvent'), then event.initKeyboardEvent() then node.dispatchEvent()

æ¨¡æ‹Ÿå…¶ä»–äº‹ä»¶: createEvent('MutationEvents') ç­‰

è‡ªå®šä¹‰äº‹ä»¶ï¼š createEvent('CustomEvent'), then initCustomEvent()

IEä¸­çš„äº‹ä»¶æ¨¡æ‹Ÿï¼š ä¸ä¸€æ ·ã€‚document.createEventObject(), then customize event, then fireEvent().

/************************END OF CHAPTER 13 *********************************/
ç¬¬16ç« ï¼š HTML5è„šæœ¬ç¼–ç¨‹

XDM: cross-domain-message. è·¨æ–‡æ¡£é€šä¿¡ã€‚postMessage(url, args)

æ‹–æ”¾äº‹ä»¶
è¢«æ‹–åŠ¨å…ƒç´ ï¼š dragstart (ondragstart), drag, dragend
å½“æ‹–åŠ¨åˆ°ä¸€ä¸ªå¯è¢«æ”¾ç½®çš„ç›®æ ‡æ—¶è¯¥ç›®æ ‡ï¼š dragenter, dragover, dragleave | drop
å¯ä»¥é€šè¿‡æ”¹å†™dragenter, dragleaveçš„é»˜è®¤è¡Œä¸ºæ¥å°†ç›®æ ‡è®¾ç½®æˆå¯æ”¾ç½®ç›®æ ‡ã€‚

dataTransferï¼š
æ‹–åŠ¨å¼€å§‹ï¼Œè¢«æ‹–åŠ¨å…ƒç´ çš„æ•°æ®è¢«setData(type, data)ï¼Œæˆ–è€…å¯ä»¥æ‰‹åŠ¨setData() dropçš„æ—¶å€™ï¼Œè¢«dropçš„å…ƒç´ getData()ã€‚
typeï¼šæˆ–æ˜¯çŸ­æ•°æ®ç±»å‹text|urlï¼Œæˆ–è€…æ˜¯text/plain|text/url-listã€‚
æ³¨ï¼š ä¸€å®šå…ˆéªŒè¯çŸ­ç±»å‹ï¼ŒIE10ä¹‹å‰ä¸æ”¯æŒæ‰©å±•çš„MIMEç±»å‹ã€‚
dataTransfer.dropEffect: è¢«æ‹–åŠ¨çš„å…ƒç´ èƒ½æ‰§è¡Œä»€ä¹ˆæ”¾ç½®è¡Œä¸ºï¼Œåœ¨dragenteräº‹ä»¶è®¾ç½®
dataTransfer.effectAllowed: è¡¨ç¤ºå…è®¸è¢«æ‹–åŠ¨å…ƒç´ çš„dropEffectï¼Œåœ¨dragstartäº‹ä»¶è®¾ç½®

é»˜è®¤å°±å¯ä»¥è¢«æ‹–åŠ¨çš„å…ƒç´ ï¼š å›¾åƒï¼Œé“¾æ¥ï¼Œè¢«å¤åˆ¶çš„æ–‡æœ¬ã€‚
æ˜¾å¼è®¾ç½®ï¼š draggable='true/false'

åª’ä½“å…ƒç´ 
video, audio: å¿…é¡»è‡³å°‘åŒ…æ‹¬src (ä¹‹åå†äº†è§£)

å†å²çŠ¶æ€å’Œç®¡ç†ï¼š
history.pushState(data, '', relativeUrl)
window.addEventListener('popstate', fn) //æŒ‰äº† åé€€ é”®è§¦å‘ã€‚
æ›´æ¢å½“å‰çŠ¶æ€ï¼š replaceState(data, relativeUrl): å’ŒpushStateçš„åŒºåˆ«æ˜¯ä¸ä¼šæ›´æ–°å†å²çŠ¶æ€æ ˆ

/************************END OF CHAPTER 16 *********************************/
ç¬¬22ç«  é«˜çº§æŠ€å·§

é«˜çº§å‡½æ•°ï¼š
ä¸€äº›é«˜çº§æŠ€å·§ï¼š
1. å®‰å…¨çš„ç±»å‹æ£€æŸ¥ã€‚
instanceof å¿…é¡»å¯¹è±¡åœ¨åŒä¸€ä¸ªå…¨å±€ä½œç”¨åŸŸã€‚å¦‚æœä¸æ˜¯å°±ä¸è¡Œã€‚è§£å†³åŠæ³•ï¼Œåˆ©ç”¨object.prototype.toStringè¿”å›
[object NativeConstructorName] (æ³¨ï¼š åªé’ˆå¯¹åŸç”Ÿæ„é€ å‡½æ•°ï¼Œå¯¹äºè‡ªå®šä¹‰æ„é€ å‡½æ•°ï¼Œæ°¸è¿œè¿”å›[object Object])

2. ä½œç”¨åŸŸå®‰å…¨çš„æ„é€ å‡½æ•° (2ä¸ªä¾‹å­ï¼Œç¬¬äºŒä¸ªè§£é‡Šäº†ç»§æ‰¿æ—¶ä¼šé‡åˆ°çš„é—®é¢˜ã€‚ é«˜çº§å‡½æ•°.js)
   ï¼ˆæ™®é€šçš„æ„é€ å‡½æ•°å¦‚æœä¸newçš„è¯ï¼Œä¼šassignç»™windowï¼Œå› ä¸ºthis = windowï¼‰

3. æƒ°æ€§è½½å…¥å‡½æ•° (é«˜çº§å‡½æ•°.js)

4. å‡½æ•°ç»‘å®š(é«˜çº§å‡½æ•°.js)

5. å‡½æ•°æŸ¯é‡ŒåŒ– (é«˜çº§å‡½æ•°.js): ç”¨äºåˆ›å»ºå·²ç»è®¾ç½®å¥½äº†ä¸€éƒ¨åˆ†å‚æ•°çš„å‡½æ•°ï¼Œæä¾›äº†å¼ºå¤§çš„åŠ¨æ€åˆ›å»ºå‡½æ•°çš„åŠŸèƒ½


é˜²ç¯¡æ”¹å¯¹è±¡
es5å®šä¹‰äº†é˜²ç¯¡æ”¹çš„æ–¹æ³•ã€‚ä¸€æ—¦å®šä¹‰ï¼Œå°±ä¸èƒ½ä¿®æ”¹äº†
Object.preventExtensions(object)
Object.isExtensible(obj)
ä¿®æ”¹æˆ–è€…åˆ é™¤å·²æœ‰æ–¹æ³•ä¸å—å½±å“

å¯†å°å¯¹è±¡ (Object.seal(obj)): ä¸unextensible objectç›¸æ¯”ï¼Œè¿˜ä¸èƒ½åˆ é™¤å±æ€§å’Œæ–¹æ³•
Object.isSealed() --> ä¹Ÿä¼šå½±å“åˆ°isExtensible() of course

å†»ç»“å¯¹è±¡ï¼šæœ€ä¸ºä¸¥æ ¼ï¼Œç”šè‡³ä¸èƒ½modify properties:
Object.freeze(object)
Object.isFrozen(object)

ä»¥ä¸Š3ç§æ¨¡å¼ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹å¦‚æœå‡ºé”™ä¼šæŠ¥é”™ã€‚éä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šé™é»˜å¤±è´¥ã€‚


é«˜çº§å®šæ—¶å™¨ï¼š 
setTimeout()å’ŒsetInterval() åªæ˜¯è¡¨ç¤ºåœ¨è§„å®šæ—¶é—´åå°†ä»£ç æ’å…¥æ‰§è¡Œé˜Ÿåˆ—ã€‚
setInterval()å¯èƒ½ä¼šå› æ­¤å¯¼è‡´æœ‰ä¸€äº›è¢«è·³è¿‡ã€‚

Yielding process: (é«˜çº§å‡½æ•°.js)
å‡½æ•°èŠ‚æµ (debounce)

è‡ªå®šä¹‰äº‹ä»¶(é«˜çº§å‡½æ•°.js)
æ‹–æ”¾(æ‹–æ”¾äº‹ä»¶.js)

/************************END OF CHAPTER 22 *********************************/